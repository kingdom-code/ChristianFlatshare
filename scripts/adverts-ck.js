jQuery(document).ready(function(e){function i(){var r={center:new google.maps.LatLng(-33.8688,151.2195),zoom:18,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("locationMap"),r),s=e("#advertLocations").val();if(s.length){var o=jQuery.parseJSON(s);e.each(o,function(r,s){if(e("#advertCountry").length){var o={strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:i,center:new google.maps.LatLng(s[0],s[1]),radius:s[2]*1609.344};newCircle=new google.maps.Circle(o);google.maps.event.addListener(newCircle,"click",function(){this.setMap(null);var e=t.indexOf(this);t.splice(e,1)})}else{var o={strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:i,clickable:!1,center:new google.maps.LatLng(s[0],s[1]),radius:s[2]*1609.344};newCircle=new google.maps.Circle(o);google.maps.event.addListener(newCircle,"click",function(){this.setMap(null);var e=t.indexOf(this);t.splice(e,1)})}t.push(newCircle);n.union(newCircle.getBounds())});e("#locationMap").show();google.maps.event.trigger(i,"resize");i.fitBounds(n)}if(e("#advertCountry").length){var u={componentRestrictions:{country:document.getElementById("advertCountry").value}},a=document.getElementById("advertLocationPlace"),f=new google.maps.places.Autocomplete(a,u);google.maps.event.addListener(f,"place_changed",function(){a.className="";var r=f.getPlace();if(!r.geometry){a.className="notfound";return}e("#locationMap").show();var s={strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,map:i,center:r.geometry.location,radius:e("#radius").val()*1609.344};newCircle=new google.maps.Circle(s);google.maps.event.addListener(newCircle,"click",function(){this.setMap(null);var e=array.indexOf(this);t.splice(e,1)});t.push(newCircle);n.union(newCircle.getBounds());google.maps.event.trigger(i,"resize");i.fitBounds(n)})}}var t=[],n=new google.maps.LatLngBounds;e("#display_2").change(function(){i()});var r=e("#advertLocations").val();r.length&&i();e("form :input").on("keypress",function(e){return e.keyCode!=13});e("form").submit(function(){var n=[];e.each(t,function(e,t){var r=t.getRadius(),i=t.getCenter(),s=i.lat(),o=i.lng();n.push([s,o,r/1609.344])});e("#advertLocations").val(JSON.stringify(n))})});