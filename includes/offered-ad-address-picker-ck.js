/* V2.0 of this function (see below for v1) does not need the AJAX address picker
	It simply returns the long / lat of the first returned value */function findAddressV2(){$("postcode").value=$("postcode").value.toUpperCase();var e=$("postcode").value.trim(),t=/^([A-Z]{1,2}[0-9][0-9A-Z]?)\s([0-9][A-Z]{2})$/i;if(!t.test(e)){alert("Please enter a valid UK postcode, INCLUDING a space e.g. W6 9PJ");$("postcode").focus();$("postcode").select();return!1}$("findAddressLink").style.display="none";$("findAddressLoadingLabel").style.display="";var n=!1;try{n=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){try{n=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){n=!1}}if(!n)try{n=new XMLHttpRequest}catch(r){n=!1}var i="ajax-functions.php?action=quickAddressSearch&postcode="+e;n.open("GET",i,!0);n.onreadystatechange=function(){switch(n.readyState){case 1:break;case 2:break;case 3:break;case 4:var e=n.responseText;if(e.substring(0,5)=="ERROR")alert("An error has occured with the submitted postcode:\n\n"+e);else{var t=e;console.log(e);$("street_name_label").innerHTML=t.street_name;$("street_name").value=t.street_name;$("town_label").innerHTML="";$("town").options.length=0;$("town").options[0]=new Option("-- Please select --","0");if(t.extra_towns){var r=t.extra_towns;for(var i=0;i<r.length;i++)$("town").options[i+1]=new Option(r[i],r[i])}$("town").style.display="";$("longitude").value=t.longitude;$("latitude").value=t.latitude;t=null}$("findAddressLoadingLabel").style.display="none";$("findAddressLink").style.display=""}};n.send(null)};